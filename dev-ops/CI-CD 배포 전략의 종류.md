# CI/CD 배포 전략의 종류

## 인플레이스 배포(In-place Deployment)

![인플레이스 배포](https://cdn-ssl-devio-img.classmethod.jp/wp-content/uploads/2021/09/00be60e9c51ea6bd1d9b670b1b6c2b98.png)

- 사용중인 환경에 새로운 변경사항이 포함된 어플리케이션만 반영하는 방법
- 배포 그룹의 각 환경 (인스턴스) 에 있는 어플리케이션을 일시정지한 후, 최신 상태의 어플리케이션의 변경 사항이 설치되면 새 버전의 앱을 실행하는 형식
- 로드 밸런서를 사용하면 각 인스턴스가 배포중이더라도 등록을 해제할 수 있으며, 배포 완료 후에 이전 버전으로 복원도 가능.

## 롤링 배포(Rolling Update Deployment)

![롤링 배포](https://cdn-ssl-devio-img.classmethod.jp/wp-content/uploads/2021/09/41c994155cefa8d57a07db2d272bdda7.png)

- 여러 개의 가동중인 서버 (인스턴스)를 갖춘 환경에서 한 번에 정해진 수만큼의 서버에 새로운 변경 사항이 포함된 어플리케이션을 배포하는 방법
- 구 버전에서 새 버전으로 트래픽을 점진적으로 전환하며, 구 버전의 인스턴스도 점차 삭제됨.
- 서버 수의 제약이 있을 경우에는 유용한 방법

## 블루/그린 배포(Blue/Green Deployment)

![블루/그린 배포](https://cdn-ssl-devio-img.classmethod.jp/wp-content/uploads/2021/09/a051df001ed96d2353d035046cbd948e.png)

- 새로운 변경사항이 포함된 어플리케이션을 위한 새로운 환경을 구축하고 교체하는 방법.
- 구 버전의 환경을 새 버전의 환경으로 똑같이 구축해서 한 번에 전환, 신 버전과 구 버전의 어플리케이션이 한 순간이라도 공존.
- 하나의 버전만 프로덕션 되기 때문에 버전 관리 문제를 방지할 수 있고, 운영 환경에 영향을 주지 않고 실제 서비스 환경으로 새 버전 테스트가 가능.
- 새 버전으로 전환 후에 문제가 생겼을 시에 구 버전으로 되돌리기 위한 롤백도 인플레이스 배포보다 더 빠름.
- 시스템 자원이 두 배로 필요해지며, 비용이 그만큼 비싸짐.

## 카나리 배포(Canary Deployment)

![카나리 배포](https://cdn-ssl-devio-img.classmethod.jp/wp-content/uploads/2021/09/064c88818a5a3ffe98ab5e2af086d684.png)

- 가동 중인 서버들의 일부에만 새로운 앱을 배포하여, 일부 트래픽을 새 버전의 환경으로 분산하는 방법.
- A/B 테스트가 가능하고, 오류율 및 성능 모니터링에 유용하게 사용할 수 있다는 장점.
- 트래픽을 분산시킬 라우팅은 임의적 또는 사용자 프로필 등을 기반으로 분류할 수 있음.
- 분산 후에 결과에 따라 새 버전이 운영 환경을 대체할 수도 있고, 다시 구 버전으로 되돌릴 수도 있음.

> 출처
>
> - https://dev.classmethod.jp/articles/ci-cd-deployment-strategies-kr/
