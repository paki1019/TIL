# Ansible(앤서블)이란?
Ansible (앤서블)은 여러 개의 서버를 효율적으로 관리할 수 있게 해주는 환경 구성 자동화 도구

앤서블은 플레이북 이라는 곳에 실행할 구성을 선언해 높으면, 필요할 때 마다 자동으로 실행 시킬 수 있는 것이 가장 큰 특징

웹서버의 구성과, DB서버의 구성을 선언해 놓으면 관리자들은 필요할 때마다 그 구성대로 서버의 설정을 베포 할 수 있게 해줌

# 앤서블의 역할
기존 리눅스에서는 동일한 환경을 구성하기 위해 Bash 쉘 스크립트에 패키지의 설치, 설정파일 수정등을 나열하여 이를 실행하는 것이 일반적, 그러나 클러스터에 존재하는 많은 서버들에 동시에, 동일한 화경을 배포해야하는 상황이 발생하게 되었고, Bash 쉘 스크립트는 한계점을 맞이함.

이를 위해 환경의 배포와 구성을 규격화된 코드로 정의해 사용하는 것을 의미하는 Infrastructure as a code라는 개념이 고안됨.

Infrastructure as a code가 가능한 자동화도구를 이용하여 인프라의 상태를 코드로 작성하고 이를 모든 서버에 배포함으로써 특정 환경을 동일하게 유지할 수 있게 됨.

이러한 자동화도구 중 가장 대표적인 툴이 바로 앤서블(ANSIBLE)

# 앤서블의 3가지 요소
앤서블은 크게 3가지인 인벤토리, 플레이북, 모듈로 이루어져있음.
- 인벤토리는 어디서 수행 할 것인지?
- 플레이북은 무엇을 수행 할 것인지?
- 모듈은 어떻게 수행할 것 인지? 를 정의합니다.

## 인벤토리(inventory)
인벤토리는 앤서블에 의해 제어될 대상을 정의함. 일반적으로 hosts.ini 파일에 정의해 사용하며, 여러 서버들의 SSH접근 IP, 포트, 리눅스 사용자와 같은 정보를 정의함.
```
[webserver]

web1 ansible_host = aaa.app.host

web2 ansible_host = bbb.app.host

[db]

db1 ansible_host = aaa.db1.host

db2 ansible_host = bbb.db2.host
```

## 플레이북(Playbook)
플레이북은 인벤토리 파일에서 정의한 대상들이 무엇을 수행할 것인지 정의하는 역할을하며, yaml 포맷으로 설정함. 앤서블을 사용하려면 이 playbook을 잘 다룰줄알아야하며, 단독으로 사용되는 것이 아닌 인벤터리와 플레이북의 조합으로 같이 사용함.
```
- name: ngins install

  hosts: all

  become: true

  tasks:

    - name: ngix package install

    yum:

       name: nginx

       state: installed
```

## 모듈(Module)
모듈은 플레이북에서 task가 어떻게 수행될지를 정의하는 요소입니다.  타겟 호스트로 실제 작업을 처리하는 단위로 이 Module이라는 개념을 사용함.
앤서블은 Python Code를 호출하여 실행하기 때문에 Python이 필수적으로 필요하며, 실제로 앤서블을 설치해보면 다양한 모듈이 같이 설치됨.