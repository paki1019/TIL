# 컨테이너 인프라 환경

## 모놀리식 아키텍처(monolithic architecture)

- 하나의 큰 목적이 있는 서비스 또는 애플리케이션에 여러 기능이 통합되어 있는 구조.
- 소프트웨어가 하나의 결합된 코드로 구성되기 때문에 초기 단계에서 설계하기 용이하며 개발이 좀 더 단순하고 코드 관리가 간편함.
- 서비스를 운영하는 과정에서 수정이 많을 경우, 어떤 서비스에서 이뤄진 수정이 연관된 다른 서비스에 영향을 미칠 가능성이 커짐.
- 서비스가 점점 성장해 기능이 추가될수록 처음에는 단순했던 서비스 간의 관계가 매우 복잡해질 수 있음.

![모놀리식 아키텍처 구성 예시](https://thebook.io/img/080241/021.jpg)

## 마이크로서비스 아키텍처

- 시즈템 전체가 하나의 목적을 지향하는 바는 모놀리식 아키텍처와 동일.
- 개별 기능을 하는 작은 서비스를 각각 개발해 연결.
- 보안, 인증 등과 관련된 기능이 독립된 서비스를 구성하고 있으며 다른 서비스들도 독립적으로 동작할 수 있는 완결된 구조.
- 개발된 서비스를 재사용하기 쉽고, 향후 서비스가 변경됐을 때 다른 서비스에 영향을 미칠 가능성이 줄어들며 사용량의 변화에 따라 특정 서비스만 확장할 수 있음.
- 사용자의 요구 사항에 따라 가용성을 즉각적으로 확보해야 하는 IaaS 환경에 적합.
- 모놀리식 아키텍처보다 복잡도가 높으며 각 서비스가 서로 유기적으로 통신하는 구조로 설계되기 때문에 네트워크를 통한 호출 횟수가 증가해 성능에 영향을 줄 수 있음.

![마이크로서비스 아키텍처 구성 예시](https://thebook.io/img/080241/023.jpg)

## 컨테이너 인프라 환경에 적합한 아키텍처

- 컨테이너 인프라 환경은 마이크로서비스 아키텍처로 구현하기에 적합.
- 컨테이너를 서비스 단위로 포장해 손쉽게 배포하고 확장할 수 있음.
- 컨테이너는 마이크로서비스 아키텍처의 서비스와 1:1로 완벽하게 대응하며, 추가 도구를 활용하여 도입, 설계, 운용, 비용이 감소하고 생산성이 향상됨.

![서비스와 1:1로 결합되는 컨테이너](https://thebook.io/img/080241/024.jpg)

## 컨테이너 인프라 환경을 지원하는 도구

- 컨테이너 인프라 환경은 크게 컨테이너, 컨테이너 관리, 개발 환경 구성 및 배포 자동화, 모니터링으로 구성.

### 도커

- 컨테이너 환경에서 독립적으로 애플리케이션을 실행할 수 있도록 컨테이너를 만들고 관리하는 것을 도와주는 컨테이너 도구.
- 도커로 애플리케이션을 실행하면 운영 체제 환경에 관계없이 독립적인 환경에서 일관된 결과를 보장함.
- 현업에서 가장 많이 사용하는 소프트웨어는 도커.

### 쿠버네티스

- 다수의 컨테이너를 관리하는데 사용.
- 컨테이너의 자동 배포와 배포된 컨테이너에 대한 동작 보증, 부하에 따른 동적 확장 등의 기능을 제공.
- 컨테이너 인프라를 기반으로 API 게이트웨이, 서비스 디스커버리, 이벤트 버스 인증 및 결제 등의 다양한 서비스를 효율적으로 관리할 수 있는 환경을 제공하고 이를 내외부와 유연하게 연결해 줌.

### 젠킨스

- 지속적 통합(CI, Continuous Integration)과 지속적 배포(CD, Continuous Deployment)를 지원.
- 지속적 통합과 지속적 배포는 개발한 프로그램의 빌드, 테스프, 패키지화, 배포 단계를 모두 자동화해 개발 단계를 표준화함.
- 개발된 코드의 빠른 적용과 효과적인 관리를 통해 개발 생산성을 높이는 데 초점이 맞춰져 있음.

### 프로메테우스와 그라파나

- 프로메테우스(Prometheus)와 그라파나(Grafana)는 모니터링을 위한 도구.
- 프로메테우스는 상태 데이터를 수집하고, 그라파나는 프로메테우스로 수집한 데이터를 관리자가 보기 좋게 시각화함.
- 컨테이너 인프라 환경에서는 많은 종류의 소규모 기능이 각각 나누어 개발되기 때문에 중앙 모니터링이 필요함.
- 프로메테우스와 그라파나는 컨테이너로 패키징되어 동작하며 최소한의 자원으로 쿠버네티스 클러스터의 상태를 시각적으로 표현함.
