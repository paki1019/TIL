# 토픽과 파티션

토픽은 카프카에서 데이터를 구분하기 위해 사용하는 단위. 토픽의 1개 이상의 파티션을 소유하고 있음. 파티션에는 프로듀서가 보낸 데이터들이 들어가 저장되는데 이 데이터를 레코드(record)라고 부름.

파티션은 카프카 병렬처리의 핵심으로 그룹으로 묶인 컨슈머들이 레코드를 병렬로 처리 할 수 있도록 매칭됨. 컨슈머의 개수를 늘림과 동시에 파티션 개수도 늘리면 처리량이 증가하는 효과를 볼 수 있음.

파티션은 자료구조의 큐(queue)와 비슷한 구조. First-in-first-out(FIFO) 구조와 같이 먼저 들어간 레코드는 컨슈머가 먼저 가져가게 됨. 단 일반적인 큐와는 달리 카프카에서는 pop된 레코드를 삭제하지 않음. 이러한 특징 때문에 토픽의 레코드는 다양한 목적을 가진 여러 컨슈머 그룹들이 토픽의 데이터를 여러 번 가져갈 수 있음.

## 토픽 이름 제약 조건

- 빈 문자열 X
- 마침표 하나(.) 또는 마침표 둘(..) X
- 249자 미만
- 영어 대소문자, 숫자, 마침표(.), 언더바(\_), 하이픈(-) 조합으로만 생성 가능.
- 카프카 내부 로직 관리 목적으로 사용되는 2개 토픽(**consumer_offsets, **transaction_state)과 동일한 이름으로 생성 불가능
- 카프카 내부적으로 사용하는 로직 때문에 토픽 이름에 마침표(.)와 언더바(\_)가 동시에 들어가면 안됨. 생성은 가능하나 WARNING 메시지가 발생
- 이미 생성된 토픽 이름의 마침표(.)를 언더바(_)로 바꾸거나 언더바(_)를 마침표(.)로 바꾼 경우 신규 토픽 이름과 동일하다면 생성 불가능

## 의미 있는 토픽 이름 작성 방법

케밥케이스(kebab-case)또는 스네이크 표기법(snake case)와 같이 소문자 + 특수문자로 작성

- `<환경>.<팀-명>.<애플리케이션-명>.<메시지-타입>`
- `<프로젝트-명>.<서비스-명>.<환경>.<이벤트-명>`
- `<환경>.<서비스-명>.<JIRA-번호>.<메시지-타입>`
- `<카프카-클러스터-명>.<환경>.<서비스-명>.<메시지-타입>`
